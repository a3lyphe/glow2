<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title>All speed tests</title>
	<script type="text/javascript" src="http://node1.bbcimg.co.uk/glow/glow/1.7.2/core/core.js"></script>
	<style>
	iframe{
		width:100%;
		height:600px;
	}

	</style>
</head>
<body>
	<div id="workingarea">
	</div>
	<div id="resultsouput">
	</div>
</body>
<script>

// run tests


var files = ["events/events.html",
			 "NodeList/appearance/appearance.html",
			 "NodeList/attributes/attributes.html",
			 "NodeList/manipulation/manipulation.html",
			 "NodeList/NodeList/NodeList.html",
			 "NodeList/traversal/traversal.html"
			 ],
	createTests,
	totalTests = files.length,
	i = 0;
	
glow.ready(function() {
	init();	
});

function init() {

	createTest(i);		
	
	
}

function createTest(){
	console.log(i, totalTests);
	if(i <= totalTests){
		
		createTests = glow.dom.create("<iframe onload='iframeloaded();'>").val("src",files[i]).appendTo("#workingarea");
		
		console.log("testing");
	}
	else{
		return;
	}


	
}
function iframeloaded(){
	i++;
	runTest();
}

function runTest(){

	var iframe = window.frames[0];
	
	iframe.woosh.ready(function(conductor){
		conductor.addListener({
			allTestsComplete:function(libraryResults, resultComparisons){
				createTest();
			}})
		conductor.start();
	});


}


</script>
</html>
